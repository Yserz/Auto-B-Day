<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:p="http://primefaces.org/ui"
                template="./layout.xhtml"
				xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="title">
		Welcome to Auto-B-Day
	</ui:define>

	<ui:define name="content">
		<p:panel id="schedulepanel" header="Ãœbersicht der aktiven Kontakte in diesem Account" rendered="#{sessionBean.loggedIn}" toggleable="true" toggleSpeed="200" style="margin-bottom: 10px;">
			<p:schedule value="#{scheduleBean.eventModel}" widgetVar="schedule" />
		</p:panel>
		<p:panel id="groupList" header="Groups" rendered="#{sessionBean.loggedIn}" style="margin-bottom: 10px;">

			<h:form>
				<p:dataTable value="#{accountBean.groupList}" 
							 var="group"
							 rows="10" 
							 paginator="true" 
							 emptyMessage="There are no Groups"
							 paginatorAlwaysVisible="false">


					<p:column>
						<f:facet name="header"> 
							<h:outputText value="Group" />
						</f:facet>

						<h:commandLink value="#{group.name}" action="#{groupBean.showGroup}">
							<f:setPropertyActionListener target="#{sessionBean.aktGroup}" value="#{group}" />
						</h:commandLink>
					</p:column>
					<p:column style="width: 10px;">
						<f:facet name="header"> 
							<h:outputText value="#Contacts" />
						</f:facet>
						#{group.abdGroupToContactCollection.size()}
					</p:column>
					<p:column style="width: 500px;">
						<f:facet name="header"> 
							<h:outputText value="Template" />
						</f:facet>
						<h:panelGrid columns="2" style="border-color: white;" cellpadding="10">
							<h:panelGroup layout="block">
								<p:panel header="Template" 
										 toggleable="true" 
										 collapsed="true" 
										 toggleSpeed="200" 
										 style="width: 500px; word-break: break-all;">
									#{group.template}
								</p:panel>
							</h:panelGroup>
							<h:panelGroup layout="block" style="float: right; width: 50px;">
								<p:commandButton value="Edit" action="#{groupBean.showTemplate}" ajax="false">
									<f:setPropertyActionListener target="#{sessionBean.aktGroup}" value="#{group}" />
								</p:commandButton>
							</h:panelGroup>
						</h:panelGrid>
					</p:column>
					<p:column style="width: 10px">
						<f:facet name="header"> 
							<h:outputText value="aktive" />
						</f:facet>
						<p:selectBooleanCheckbox value="#{group.active}" >
							<p:ajax listener="#{accountBean.toggleGroupActivation}"/> 
						</p:selectBooleanCheckbox>
					</p:column>

				</p:dataTable>

			</h:form>
		</p:panel>
		<p:panel id="updatepanel" rendered="#{sessionBean.loggedIn}" header="Update dieses Accounts" style="margin-bottom: 10px;">
			<h:form>
				<p:commandButton value="Update account" 
								icon="ui-icon ui-icon-disk"
								ajax="false"
								actionListener="#{updateAccountBean.updateAccount}"/>
			</h:form>
		</p:panel>

	</ui:define>

</ui:composition>

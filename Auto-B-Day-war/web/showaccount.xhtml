<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:p="http://primefaces.org/ui"
                template="./layout.xhtml"
				xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="title">
		Welcome to Auto-B-Day
	</ui:define>
	
	<ui:define name="content">
		<p:panel id="groupList" header="Groups" rendered="#{sessionBean.loggedIn}">
				<h:form>
					<p:dataTable value="#{accountBean.groupList}" 
									var="group"
									rows="10" 
									paginator="true" 
									emptyMessage="There are no Groups"
									paginatorAlwaysVisible="false">
						

						<p:column>
							<f:facet name="header"> 
								<h:outputText value="Group" />
							</f:facet>
							
							<h:commandLink value="#{group.name}" action="#{groupBean.showGroup}">
								<f:setPropertyActionListener target="#{sessionBean.aktGroup}" value="#{group}" />
							</h:commandLink>
						</p:column>
						<p:column>
							<f:facet name="header"> 
								<h:outputText value="Number of Contacts" />
							</f:facet>
							#{group.abdGroupToContactCollection.size()}
						</p:column>
						<p:column>
							<f:facet name="header"> 
								<h:outputText value="Template" />
							</f:facet>
							#{group.template}
							<p:commandButton value="Edit" action="#{groupBean.showTemplate}" ajax="false">
								<f:setPropertyActionListener target="#{sessionBean.aktGroup}" value="#{group}" />
							</p:commandButton>
						</p:column>
						<p:column>
							<f:facet name="header"> 
								<h:outputText value="aktiv" />
							</f:facet>
							<p:selectBooleanCheckbox value="#{group.active}" >
								<p:ajax listener="#{accountBean.toggleGroupActivation}"/> 
							</p:selectBooleanCheckbox>
						</p:column>

					</p:dataTable>

				</h:form>
			</p:panel>
		

	</ui:define>

</ui:composition>

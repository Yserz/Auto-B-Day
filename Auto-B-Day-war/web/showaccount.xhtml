<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:p="http://primefaces.org/ui"
                template="./layout.xhtml"
				xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="title">
		Welcome to Auto-B-Day
	</ui:define>
	
	<ui:define name="content">
		<h:form>
			<p:panel id="importpanel" rendered="#{sessionBean.loggedIn}" header="Erneutes Importieren eines Accounts" style="margin-bottom: 10px;">
				<p:focus context="importpanel"/>
				<h:panelGrid columns="1">
					<h:inputHidden id="userName" 
									value="#{sessionBean.aktAccount.username}"
									required="true"
									requiredMessage="Ein Username ist erforderlich."/>
					<p:message for="userName" showSummary="true" />



					<h:inputHidden id="accountpassword" 
								value="#{sessionBean.aktAccount.passwort}" 
								required="true"
								requiredMessage="Ein Passwort ist erforderlich."/>
					<p:message for="accountpassword" showSummary="true" />

					<!-- TODO type -->
				</h:panelGrid>


				<p:commandButton value="Import again" 
								update="importpanel" 
								icon="ui-icon ui-icon-disk"
								ajax="false"
								actionListener="#{importNewAccountBean.importNewAccount}"/>
			</p:panel>
		</h:form>
		<p:panel id="groupList" header="Groups" rendered="#{sessionBean.loggedIn}">
			
				<h:form>
					<p:dataTable value="#{accountBean.groupList}" 
									var="group"
									rows="10" 
									paginator="true" 
									emptyMessage="There are no Groups"
									paginatorAlwaysVisible="false">
						

						<p:column>
							<f:facet name="header"> 
								<h:outputText value="Group" />
							</f:facet>
							
							<h:commandLink value="#{group.name}" action="#{groupBean.showGroup}">
								<f:setPropertyActionListener target="#{sessionBean.aktGroup}" value="#{group}" />
							</h:commandLink>
						</p:column>
						<p:column style="width: 10px;">
							<f:facet name="header"> 
								<h:outputText value="#Contacts" />
							</f:facet>
							#{group.abdGroupToContactCollection.size()}
						</p:column>
						<p:column style="width: 500px;">
							<f:facet name="header"> 
								<h:outputText value="Template" />
							</f:facet>
							<h:panelGrid columns="2" style="border-color: white;" cellpadding="10">
								<h:panelGroup layout="block">
									<p:panel header="Template" 
											 toggleable="true" 
											 collapsed="true" 
											 toggleSpeed="200" 
											 style="width: 500px; word-break: break-all;">
										#{group.template}
									</p:panel>
								</h:panelGroup>
								<h:panelGroup layout="block" style="float: right; width: 50px;">
									<p:commandButton value="Edit" action="#{groupBean.showTemplate}" ajax="false">
										<f:setPropertyActionListener target="#{sessionBean.aktGroup}" value="#{group}" />
									</p:commandButton>
								</h:panelGroup>
							</h:panelGrid>
						</p:column>
						<p:column style="width: 10px">
							<f:facet name="header"> 
								<h:outputText value="aktive" />
							</f:facet>
							<p:selectBooleanCheckbox value="#{group.active}" >
								<p:ajax listener="#{accountBean.toggleGroupActivation}"/> 
							</p:selectBooleanCheckbox>
						</p:column>

					</p:dataTable>

				</h:form>
			</p:panel>
		

	</ui:define>

</ui:composition>
